webpackJsonp([1],{"8TpD":function(e,t){},D8LU:function(e,t){},FvOH:function(e,t){},KwFe:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};s.d(o,"login",function(){return H}),s.d(o,"logout",function(){return G}),s.d(o,"getsite",function(){return R}),s.d(o,"delsite",function(){return j}),s.d(o,"addsite",function(){return O}),s.d(o,"upsite",function(){return K}),s.d(o,"getftp",function(){return Q}),s.d(o,"addftp",function(){return Y}),s.d(o,"delftp",function(){return J}),s.d(o,"upftp",function(){return V}),s.d(o,"getmysql",function(){return B}),s.d(o,"addmysql",function(){return W}),s.d(o,"delmysql",function(){return X}),s.d(o,"upmysql",function(){return Z}),s.d(o,"gethome",function(){return ee});var a=s("xd7I"),r=s("jsbU"),n=s.n(r),i=(s("D8LU"),{name:"App",data:function(){return{navList:[{id:1,title:"首页",name:"Home"},{id:2,title:"站点",name:"Site"},{id:3,title:"FTP",name:"Ftp"},{id:4,title:"MYSQL",name:"Mysql"}],activeIndex:"1"}},methods:{handleSelect:function(e,t){console.log(e,t)},logout:function(){console.log("logout"),localStorage.clear(),this.$store.dispatch("accountLogout")}},computed:{userInfo:function(){return this.$store.state.userInfo}}}),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[e._l(e.navList,function(t){return s("el-menu-item",{key:t.id,attrs:{index:"item.id"}},[s("router-link",{attrs:{to:{name:t.name}}},[e._v(e._s(t.title))])],1)}),e._v(" "),s("el-menu-item",[e.userInfo.token?s("a",{attrs:{href:""},on:{click:e.logout}},[e._v("退出")]):e._e()])],2),e._v(" "),s("router-view")],1)},staticRenderFns:[]};var c=s("C7Lr")(i,l,!1,function(e){s("hlAN")},null,null).exports,m=s("e1F6"),f={name:"Home",data:function(){return{timer:null,loadavg:{},sysinfo:{},diskinfo:{}}},methods:{getloadavg:function(e){var t=this;this.$http.gethome(e).then(function(s){0===s.errcode&&("sysinfo"==e?t.sysinfo=s.data:"loadavg"==e?t.loadavg=s.data:"diskinfo"==e&&(t.diskinfo=s.data))}).catch(function(e){console.log(e)})}},computed:{userInfo:function(){return this.$store.state.userInfo}},created:function(){var e=this;this.getloadavg("sysinfo"),this.getloadavg("loadavg"),this.getloadavg("diskinfo"),this.timer=setInterval(function(){e.getloadavg("loadavg")},1e4)},destroyed:function(){clearInterval(this.timer)},components:{}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("span",{staticClass:"el-icon-user-solid"},[e._v(" "+e._s(e.userInfo.username))]),e._v(" "),s("el-divider"),e._v(" "),s("span",{staticClass:"el-icon-setting"},[e._v(" 负 载 "+e._s(e.loadavg.one)+" "+e._s(e.loadavg.five)+" "+e._s(e.loadavg.fifteen))]),e._v(" "),s("el-divider"),e._v(" "),s("span",{staticClass:"el-icon-setting"},[e._v(" CPU "+e._s(e.sysinfo.cputype)+" 核心 "+e._s(e.sysinfo.cpunum))]),e._v(" "),s("el-divider"),e._v(" "),s("span",{staticClass:"el-icon-setting"},[e._v(" 根分区 总大小 "+e._s(e.diskinfo.dasize)+" 使用率 "+e._s(e.diskinfo.dause))])],1)},staticRenderFns:[]};var p=s("C7Lr")(f,u,!1,function(e){s("8TpD")},null,null).exports,d={name:"Site",data:function(){return{is_sitelist:!0,sitelistData:[],pages:1,num:5,page:1,total:1,search:"",nid:"",is_create:!0,is_update:!1,form:{site_name:"",bind_domain:"",root_path:"",is_ssl:!1,log_path:!1,deny_ua:!0,deny_referer:!0,safe:!0,cache:!0},form2:{site_info:{extra_kwargs:{}}}}},methods:{handleCurrentChange:function(e){this.page=e,console.log(this.page),this.onGetsite()},onGetsite:function(){var e=this,t={nid:this.nid,page:this.page};this.$http.getsite(t).then(function(t){e.errmsg=t.errmsg,0===t.errcode&&(e.sitelistData=t.data,e.total=t.total,e.page=t.page,e.pages=t.pages,""!=e.nid&&(e.form2=t.data[0],e.is_create=!1,e.is_update=!0,e.is_sitelist=!1))}).catch(function(e){console.log(e)})},handleEdit:function(e){this.nid=e,this.onGetsite()},handleDelete:function(e){var t=this,s={nid:e};this.$http.delsite(s).then(function(e){if(t.errmsg=e.errmsg,0===e.errcode){var s=e.data;console.log(s),t.onGetsite()}}).catch(function(e){e.response?t.errmsg=e.response.data.errmsg:console.log(e.message),console.log(e.config)})},onUpsite:function(){var e=this,t={nid:this.nid,site_name:this.form2.site_name,root_path:this.form2.root_path,bind_domain:this.form2.bind_domain,site_info:{is_ssl:this.form2.site_info.is_ssl,php_ver:this.form2.site_info.php_ver,log_path:this.form2.site_info.log_path,extra_kwargs:{rewrite:"wordpress",deny_ua:this.form2.site_info.extra_kwargs.deny_ua,deny_referer:this.form2.site_info.extra_kwargs.deny_referer,safe:this.form2.site_info.extra_kwargs.safe,cache:this.form2.site_info.extra_kwargs.cache}}};this.$http.upsite(t).then(function(t){if(e.errmsg=t.errmsg,0===t.errcode){t.data;e.$message({message:"更新站点成功",type:"success"}),e.is_create=!0,e.is_update=!1,e.is_sitelist=!0,e.nid="",e.onGetsite()}}).catch(function(t){t.response?(e.errmsg=t.response.data.errmsg,e.$message.error(e.errmsg)):console.log(t.message),console.log(t.config)})},onAddsite:function(){var e=this;if(this.form.log_path)var t="/home/weblogs/"+this.form.site_name;else t="";var s={site_name:this.form.site_name,root_path:"/home/wwwroot/"+this.form.root_path,bind_domain:this.form.bind_domain,site_info:{is_ssl:this.form.is_ssl,php_ver:this.form.php_ver,log_path:t,extra_kwargs:{rewrite:"",deny_ua:this.form.deny_ua,deny_referer:this.form.deny_referer,safe:this.form.safe,cache:this.form.cache}}};this.$http.addsite(s).then(function(t){if(e.errmsg=t.errmsg,0===t.errcode){t.data;e.$message({message:"创建站点成功",type:"success"}),e.onGetsite()}}).catch(function(t){t.response?(e.errmsg=t.response.data.errmsg,console.log(123,e.errmsg),e.$message.error(e.errmsg)):console.log(t.message),console.log(t.config)})},onGetinfo:function(){this.form.root_path=this.form.site_name,this.form.bind_domain=this.form.site_name+".top,www."+this.form.site_name+".top"},goback:function(e){"update"==e&&(this.nid=""),this.is_update=!1,this.is_create=!0,this.is_sitelist=!0,this.onGetsite(this.nid)}},created:function(){this.onGetsite()}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"site"},[s("el-table",{directives:[{name:"show",rawName:"v-show",value:e.is_sitelist,expression:"is_sitelist"}],staticStyle:{width:"90%","margin-top":"20px"},attrs:{data:e.sitelistData}},[s("el-table-column",{attrs:{label:"站点名",prop:"site_name"}}),e._v(" "),s("el-table-column",{attrs:{label:"网站根目录",prop:"root_path"}}),e._v(" "),s("el-table-column",{attrs:{label:"绑定域名",prop:"bind_domain"}}),e._v(" "),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.row.nid)}}}),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.row.nid)}}})]}}])},[s("template",{slot:"header"},[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],2)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.is_sitelist,expression:"is_sitelist"}],staticStyle:{"margin-top":"20px","text-align":"center"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.page,"page-size":e.num,"page-count":e.pages},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.is_create,expression:"is_create"}],ref:"form",staticStyle:{width:"90%","margin-top":"20px"},attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"站点名"}},[s("el-input",{attrs:{placeholder:"3-10个字母组成"},nativeOn:{keyup:function(t){return e.onGetinfo(t)}},model:{value:e.form.site_name,callback:function(t){e.$set(e.form,"site_name",t)},expression:"form.site_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"绑定域名"}},[s("el-input",{attrs:{placeholder:"多个域名以英文逗号,分隔"},model:{value:e.form.bind_domain,callback:function(t){e.$set(e.form,"bind_domain",t)},expression:"form.bind_domain"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"网站根目录"}},[s("el-input",{attrs:{placeholder:"默认/home/wwwroot/站点名"},model:{value:e.form.root_path,callback:function(t){e.$set(e.form,"root_path",t)},expression:"form.root_path"}},[s("template",{slot:"prepend"},[e._v("/home/wwwroot/")])],2)],1),e._v(" "),s("el-form-item",{attrs:{label:"PHP版本"}},[s("el-select",{attrs:{placeholder:"请选择PHP版本"},model:{value:e.form.php_ver,callback:function(t){e.$set(e.form,"php_ver",t)},expression:"form.php_ver"}},[s("el-option",{attrs:{label:"php5.6",value:"php5.6"}}),e._v(" "),s("el-option",{attrs:{label:"php7.0",value:"php7.0"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"开启SSL"}},[s("el-switch",{model:{value:e.form.is_ssl,callback:function(t){e.$set(e.form,"is_ssl",t)},expression:"form.is_ssl"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"开启日志"}},[s("el-switch",{model:{value:e.form.log_path,callback:function(t){e.$set(e.form,"log_path",t)},expression:"form.log_path"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"额外设置"}},[e._v("\n      屏蔽非常见UA\n      "),s("el-switch",{model:{value:e.form.deny_ua,callback:function(t){e.$set(e.form,"deny_ua",t)},expression:"form.deny_ua"}}),e._v("启用防盗链\n      "),s("el-switch",{model:{value:e.form.deny_referer,callback:function(t){e.$set(e.form,"deny_referer",t)},expression:"form.deny_referer"}}),e._v("安全加固\n      "),s("el-switch",{model:{value:e.form.safe,callback:function(t){e.$set(e.form,"safe",t)},expression:"form.safe"}}),e._v("开启缓存\n      "),s("el-switch",{model:{value:e.form.cache,callback:function(t){e.$set(e.form,"cache",t)},expression:"form.cache"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"网站备注"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onAddsite}},[e._v("创建站点")]),e._v(" "),s("el-button",[e._v("取消")])],1)],1),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.is_update,expression:"is_update"}],ref:"form2",staticStyle:{width:"90%","margin-top":"20px"},attrs:{model:e.form2,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"站点名"}},[s("el-input",{attrs:{placeholder:"3-10个字母组成",disabled:""},model:{value:e.form2.site_name,callback:function(t){e.$set(e.form2,"site_name",t)},expression:"form2.site_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"绑定域名"}},[s("el-input",{attrs:{placeholder:"多个域名以英文逗号,分隔"},model:{value:e.form2.bind_domain,callback:function(t){e.$set(e.form2,"bind_domain",t)},expression:"form2.bind_domain"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"网站根目录"}},[s("el-input",{attrs:{placeholder:"必须是/home/wwwroot/xxxx",disabled:""},model:{value:e.form2.root_path,callback:function(t){e.$set(e.form2,"root_path",t)},expression:"form2.root_path"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"PHP版本"}},[s("el-select",{attrs:{placeholder:"请选择PHP版本"},model:{value:e.form2.site_info.php_ver,callback:function(t){e.$set(e.form2.site_info,"php_ver",t)},expression:"form2.site_info.php_ver"}},[s("el-option",{attrs:{label:"php5.6",value:"php5.6"}}),e._v(" "),s("el-option",{attrs:{label:"php7.0",value:"php7.0"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"开启SSL"}},[s("el-switch",{model:{value:e.form2.site_info.is_ssl,callback:function(t){e.$set(e.form2.site_info,"is_ssl",t)},expression:"form2.site_info.is_ssl"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"开启日志"}},[s("el-switch",{model:{value:e.form2.site_info.log_path,callback:function(t){e.$set(e.form2.site_info,"log_path",t)},expression:"form2.site_info.log_path"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"额外设置"}},[e._v("\n      屏蔽非常见UA\n      "),s("el-switch",{model:{value:e.form2.site_info.extra_kwargs.deny_ua,callback:function(t){e.$set(e.form2.site_info.extra_kwargs,"deny_ua",t)},expression:"form2.site_info.extra_kwargs.deny_ua"}}),e._v("启用防盗链\n      "),s("el-switch",{model:{value:e.form2.site_info.extra_kwargs.deny_referer,callback:function(t){e.$set(e.form2.site_info.extra_kwargs,"deny_referer",t)},expression:"form2.site_info.extra_kwargs.deny_referer"}}),e._v("安全加固\n      "),s("el-switch",{model:{value:e.form2.site_info.extra_kwargs.safe,callback:function(t){e.$set(e.form2.site_info.extra_kwargs,"safe",t)},expression:"form2.site_info.extra_kwargs.safe"}}),e._v("开启缓存\n      "),s("el-switch",{model:{value:e.form2.site_info.extra_kwargs.cache,callback:function(t){e.$set(e.form2.site_info.extra_kwargs,"cache",t)},expression:"form2.site_info.extra_kwargs.cache"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"网站备注"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form2.note,callback:function(t){e.$set(e.form2,"note",t)},expression:"form2.note"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onUpsite}},[e._v("更新站点")]),e._v(" "),s("el-button",{on:{click:function(t){return e.goback("update")}}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var _=s("C7Lr")(d,h,!1,function(e){s("QsiU")},"data-v-8d1ee486",null).exports,g={name:"Ftp",data:function(){return{ftplistData:[],nid:"",search:"",is_ftplist:!0,is_create:!0,is_update:!1,form:{ftp_user:"",ftp_path:""},form2:{}}},methods:{ongetFtp:function(){var e=this;this.$http.getftp(this.nid).then(function(t){e.errmsg=t.errmsg,0===t.errcode&&(e.ftplistData=t.data,""!=e.nid&&(e.form2=t.data[0],e.is_create=!1,e.is_update=!0,e.is_ftplist=!1))}).catch(function(e){console.log(e)})},onAddFtp:function(){var e=this;if(""!=this.form.ftp_path)var t="/home/wwwroot/"+this.form.ftp_path;else t="";var s={ftp_user:this.form.ftp_user,ftp_passwd:this.form.ftp_passwd,ftp_path:t};this.$http.addftp(s).then(function(t){if(e.errmsg=t.errmsg,0===t.errcode){t.data;e.$message({message:"创建站点成功",type:"success"}),e.ongetFtp()}}).catch(function(t){t.response?e.$message.error(t.response.data.errmsg):console.log(t.message),console.log(t.config)})},handleEdit:function(e){this.nid=e,this.ongetFtp()},handleDelete:function(e){var t=this,s={nid:e};this.$http.delftp(s).then(function(e){if(t.errmsg=e.errmsg,0===e.errcode){e.data;t.ongetFtp()}}).catch(function(e){e.response?t.errmsg=e.response.data.errmsg:console.log(e.message),console.log(e.config)})},onupFtp:function(){var e=this,t={nid:this.nid,ftp_user:this.form2.ftp_user,ftp_passwd:this.form2.ftp_passwd,ftp_path:this.form2.ftp_path,status:this.form2.status};this.$http.upftp(t).then(function(t){if(e.errmsg=t.errmsg,0===t.errcode){t.data;e.$message({message:"更新站点成功",type:"success"}),e.is_create=!0,e.is_update=!1,e.is_ftplist=!0,e.nid="",e.ongetFtp()}}).catch(function(t){t.response?(e.errmsg=t.response.data.errmsg,e.$message.error(e.errmsg)):console.log(t.message),console.log(t.config)})},goback:function(e){"update"==e&&(this.nid=""),this.is_update=!1,this.is_create=!0,this.is_ftplist=!0,this.ongetFtp()}},created:function(){this.ongetFtp()}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ftp"},[s("el-table",{directives:[{name:"show",rawName:"v-show",value:e.is_ftplist,expression:"is_ftplist"}],staticStyle:{width:"90%","margin-top":"20px"},attrs:{data:e.ftplistData}},[s("el-table-column",{attrs:{label:"FTP用户名",prop:"ftp_user"}}),e._v(" "),s("el-table-column",{attrs:{label:"FTP密码",prop:"ftp_passwd"}}),e._v(" "),s("el-table-column",{attrs:{label:"路径",prop:"ftp_path"}}),e._v(" "),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.row.nid)}}}),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.row.nid)}}})]}}])},[s("template",{slot:"header"},[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],2)],1),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.is_create,expression:"is_create"}],ref:"form",staticStyle:{width:"90%","margin-top":"20px"},attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"FTP名 "}},[s("el-input",{attrs:{placeholder:"3-10个字母组成"},model:{value:e.form.ftp_user,callback:function(t){e.$set(e.form,"ftp_user",t)},expression:"form.ftp_user"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"FTP密码 "}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.ftp_passwd,callback:function(t){e.$set(e.form,"ftp_passwd",t)},expression:"form.ftp_passwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"FTP根目录"}},[s("el-input",{attrs:{placeholder:"默认是/home/wwwroot/FTP用户名"},model:{value:e.form.ftp_path,callback:function(t){e.$set(e.form,"ftp_path",t)},expression:"form.ftp_path"}},[s("template",{slot:"prepend"},[e._v("/home/wwwroot/")])],2)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onAddFtp}},[e._v("创建站点")]),e._v(" "),s("el-button",[e._v("取消")])],1)],1),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.is_update,expression:"is_update"}],ref:"form2",staticStyle:{width:"90%","margin-top":"20px"},attrs:{model:e.form2,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"FTP名 "}},[s("el-input",{attrs:{placeholder:"3-10个字母组成",disabled:""},model:{value:e.form2.ftp_user,callback:function(t){e.$set(e.form2,"ftp_user",t)},expression:"form2.ftp_user"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"FTP密码 "}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form2.ftp_passwd,callback:function(t){e.$set(e.form2,"ftp_passwd",t)},expression:"form2.ftp_passwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"FTP根目录"}},[s("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form2.ftp_path,callback:function(t){e.$set(e.form2,"ftp_path",t)},expression:"form2.ftp_path"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"开启/关闭"}},[s("el-switch",{model:{value:e.form2.status,callback:function(t){e.$set(e.form2,"status",t)},expression:"form2.status"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onupFtp}},[e._v("更新站点")]),e._v(" "),s("el-button",{on:{click:function(t){return e.goback("update")}}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var b=s("C7Lr")(g,v,!1,function(e){s("FvOH")},"data-v-64815ba4",null).exports,w=s("a3Yh"),y=s.n(w),x={name:"Mysql",data:function(){return y()({mysqllistData:[],nid:"",search:"",form:{mysql_user:""},form2:{},is_mysqllist:!0,is_create:!0,is_update:!1},"nid","")},methods:{ongetMysql:function(){var e=this;this.$http.getmysql(this.nid).then(function(t){e.errmsg=t.errmsg,0===t.errcode&&(e.mysqllistData=t.data,""!=e.nid&&(e.form2=t.data[0],e.is_create=!1,e.is_update=!0,e.is_mysqllist=!1))}).catch(function(e){console.log(e)})},onAddMysql:function(){var e=this,t={mysql_user:this.form.mysql_user,mysql_name:this.form.mysql_name,mysql_passwd:this.form.mysql_passwd,accept:this.form.accept};this.$http.addmysql(t).then(function(t){if(e.errmsg=t.errmsg,0===t.errcode){t.data;e.$message({message:"创建数据库成功",type:"success"}),e.ongetMysql()}}).catch(function(t){t.response?(e.errmsg=t.response.data.errmsg,e.$message.error(e.errmsg)):console.log(t.message),console.log(t.config)})},handleEdit:function(e){this.nid=e,this.ongetMysql()},handleDelete:function(e){var t=this,s={nid:e};this.$http.delmysql(s).then(function(e){if(t.errmsg=e.errmsg,0===e.errcode){e.data;t.ongetMysql()}}).catch(function(e){e.response?t.errmsg=e.response.data.errmsg:console.log(e.message),console.log(e.config)})},onupMysql:function(){var e=this,t={nid:this.nid,mysql_passwd:this.form2.mysql_passwd,accept:this.form2.accept};this.$http.upmysql(t).then(function(t){if(e.errmsg=t.errmsg,0===t.errcode){t.data;e.$message({message:"更新数据库成功",type:"success"}),e.is_create=!0,e.is_update=!1,e.is_mysqllist=!0,e.nid="",e.ongetMysql()}}).catch(function(t){t.response?(e.errmsg=t.response.data.errmsg,e.$message.error(e.errmsg)):console.log(t.message),console.log(t.config)})},goback:function(e){"update"==e&&(this.nid=""),this.is_update=!1,this.is_create=!0,this.is_mysqllist=!0,this.ongetMysql(this.nid)}},created:function(){this.ongetMysql(this.nid)}},k={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ftp"},[s("el-table",{directives:[{name:"show",rawName:"v-show",value:e.is_mysqllist,expression:"is_mysqllist"}],staticStyle:{width:"90%","margin-top":"20px"},attrs:{data:e.mysqllistData}},[s("el-table-column",{attrs:{label:"Mysql用户名",prop:"mysql_user"}}),e._v(" "),s("el-table-column",{attrs:{label:"Mysql数据库",prop:"mysql_name"}}),e._v(" "),s("el-table-column",{attrs:{label:"Mysql密码",prop:"mysql_passwd"}}),e._v(" "),s("el-table-column",{attrs:{label:"连接地址",prop:"accept"}}),e._v(" "),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.row.nid)}}}),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.row.nid)}}})]}}])},[s("template",{slot:"header"},[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],2)],1),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.is_create,expression:"is_create"}],ref:"form",staticStyle:{width:"90%","margin-top":"20px"},attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"Mysql用户名 "}},[s("el-input",{attrs:{placeholder:"3-10个字母组成"},model:{value:e.form.mysql_user,callback:function(t){e.$set(e.form,"mysql_user",t)},expression:"form.mysql_user"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Mysql数据库 "}},[s("el-input",{attrs:{placeholder:"3-10个字母组成"},model:{value:e.form.mysql_name,callback:function(t){e.$set(e.form,"mysql_name",t)},expression:"form.mysql_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Mysql密码 "}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.mysql_passwd,callback:function(t){e.$set(e.form,"mysql_passwd",t)},expression:"form.mysql_passwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"连接方式 "}},[s("el-input",{attrs:{placeholder:"%/localhost/ip地址"},model:{value:e.form.accept,callback:function(t){e.$set(e.form,"accept",t)},expression:"form.accept"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onAddMysql}},[e._v("创建数据库")]),e._v(" "),s("el-button",[e._v("返回")])],1)],1),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.is_update,expression:"is_update"}],ref:"form2",staticStyle:{width:"90%","margin-top":"20px"},attrs:{model:e.form2,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"Mysql用户名 "}},[s("el-input",{attrs:{placeholder:"3-10个字母组成",disabled:""},model:{value:e.form2.mysql_user,callback:function(t){e.$set(e.form2,"mysql_user",t)},expression:"form2.mysql_user"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Mysql数据库 "}},[s("el-input",{attrs:{placeholder:"3-10个字母组成",disabled:""},model:{value:e.form2.mysql_name,callback:function(t){e.$set(e.form2,"mysql_name",t)},expression:"form2.mysql_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Mysql密码 "}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form2.mysql_passwd,callback:function(t){e.$set(e.form2,"mysql_passwd",t)},expression:"form2.mysql_passwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"连接方式 "}},[s("el-input",{attrs:{placeholder:"%/localhost/ip地址"},model:{value:e.form2.accept,callback:function(t){e.$set(e.form2,"accept",t)},expression:"form2.accept"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onupMysql}},[e._v("更新数据库")]),e._v(" "),s("el-button",{on:{click:function(t){return e.goback("update")}}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var $=s("C7Lr")(x,k,!1,function(e){s("s/xj")},"data-v-7bf62020",null).exports,q={name:"Login",data:function(){return{username:"",password:""}},methods:{onLogin:function(){var e=this,t={username:this.username,password:this.password};this.$http.login(t).then(function(t){if(0===t.errcode){var s=Math.round((new Date).getTime()/1e3),o=t.data.username,a=t.data.token;localStorage.setItem("otime",s),localStorage.setItem("username",o),localStorage.setItem("token",a),localStorage.setItem("accesstoken",e.$md5(o+s.toString()+a));var r={token:localStorage.getItem("token"),username:localStorage.getItem("username")};e.$store.dispatch("getUserInfo",r),e.$message({message:"登录成功",type:"success"}),e.$router.go(-1)}else e.$message.error(t.errmsg)}).catch(function(e){console.log(e)})}},components:{}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticStyle:{width:"60%","margin-top":"20px","text-align":"center"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("el-input",{staticStyle:{"margin-top":"20px"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.onLogin}},[e._v("登 录")])],1)])},staticRenderFns:[]};var F=s("C7Lr")(q,S,!1,function(e){s("RFPe")},null,null).exports;a.default.use(m.a);var I=new m.a({mode:"history",routes:[{path:"/",name:"Home",component:p,meta:{requiresAuth:!0}},{path:"/site",name:"Site",component:_,meta:{requiresAuth:!0}},{path:"/ftp",name:"Ftp",component:b,meta:{requiresAuth:!0}},{path:"/mysql",name:"Mysql",component:$,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:F}]}),M=(s("KwFe"),s("2bvH"));a.default.use(M.a);var L=new M.a.Store({state:{userInfo:{}},mutations:{getUserInfo:function(e,t){e.userInfo=t},accountLogout:function(e){e.userInfo={}}},actions:{getUserInfo:function(e,t){(0,e.commit)("getUserInfo",t)},accountLogout:function(e){(0,e.commit)("accountLogout")}}}),P=s("rVsN"),C=s.n(P),D=s("84iU"),A=s.n(D);A.a.defaults.baseURL="http://192.168.6.220:8088/api/v1";var U="/login",N="/site",T="/ftp",E="/mysql",z="/home";function H(e){return A.a.post(U,e).then(function(e){return e.data})}function G(e){return A.a.post(U,e).then(function(e){return e.data})}function R(e){return A.a.get(N,{params:e}).then(function(e){return e.data})}function j(e){return A.a.delete(N,{data:e}).then(function(e){return e.data})}function O(e){return A.a.post(N,e).then(function(e){return e.data})}function K(e){return A.a.put(N,e).then(function(e){return e.data})}function Q(e){return A.a.get(T+"?nid="+e).then(function(e){return e.data})}function Y(e){return A.a.post(T,e).then(function(e){return e.data})}function J(e){return A.a.delete(T,{data:e}).then(function(e){return e.data})}function V(e){return A.a.put(T,e).then(function(e){return e.data})}function B(e){return A.a.get(E+"?nid="+e).then(function(e){return e.data})}function W(e){return A.a.post(E,e).then(function(e){return e.data})}function X(e){return A.a.delete(E,{data:e}).then(function(e){return e.data})}function Z(e){return A.a.put(E,e).then(function(e){return e.data})}function ee(e){return A.a.get(z+"?info="+e).then(function(e){return e.data})}A.a.interceptors.request.use(function(e){var t=localStorage.getItem("otime"),s=localStorage.getItem("username"),o=localStorage.getItem("accesstoken");return t&&s&&o&&(e.headers.otime=t,e.headers.username=s,e.headers.accesstoken=o),e},function(e){return C.a.reject(e)}),A.a.interceptors.response.use(function(e){return 4023!=e.data.errcode&&4024!=e.data.errcode&&4026!=e.data.errcode||(localStorage.clear(),L.dispatch("accountLogout"),I.push({name:"Login"})),e},function(e){return C.a.reject(e)});var te=s("KPSb"),se=s.n(te);a.default.prototype.$http=o,a.default.prototype.$md5=se.a,a.default.config.productionTip=!1,a.default.use(n.a),I.beforeEach(function(e,t,s){if(e.meta.requiresAuth)if(localStorage.getItem("token")){var o={token:localStorage.getItem("token"),username:localStorage.getItem("username")};L.dispatch("getUserInfo",o),s()}else s({name:"Login"});else s()}),new a.default({el:"#app",router:I,store:L,components:{App:c},template:"<App/>"})},QsiU:function(e,t){},RFPe:function(e,t){},hlAN:function(e,t){},"s/xj":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3346b098a69d16c1bdbd.js.map